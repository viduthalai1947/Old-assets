(function(a){a.fn.fitText=function(b,c){var d={minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY};return this.each(function(){var e=a(this);var f=b||1;if(c){a.extend(d,c)}var g=function(){e.css("font-size",Math.max(Math.min(e.width()/(f*10),parseFloat(d.maxFontSize)),parseFloat(d.minFontSize)))};g();a(window).resize(g)})}})(jQuery);(function(a){function b(){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(a)}else if(window.opera&&window.opera.postError){window.opera.postError(a)}}a.fn.ajaxSubmit=function(c){function r(d){function w(c){if(m.aborted||v){return}if(c===true&&m){m.abort("timeout");return}var d=k.contentWindow?k.contentWindow.document:k.contentDocument?k.contentDocument:k.document;if(!d||d.location.href==g.iframeSrc){if(!p)return}k.detachEvent?k.detachEvent("onload",w):k.removeEventListener("load",w,false);var e="success",f;try{if(p){throw"timeout"}var i=g.dataType=="xml"||d.XMLDocument||a.isXMLDoc(d);b("isXml="+i);if(!i&&window.opera&&(d.body==null||d.body.innerHTML=="")){if(--u){b("requeing onLoad callback, DOM not available");setTimeout(w,250);return}}var l=d.body?d.body:d.documentElement;m.responseText=l?l.innerHTML:null;m.responseXML=d.XMLDocument?d.XMLDocument:d;if(i)g.dataType="xml";m.getResponseHeader=function(a){var b={"content-type":g.dataType};return b[a]};if(l){m.status=Number(l.getAttribute("status"))||m.status;m.statusText=l.getAttribute("statusText")||m.statusText}var n=g.dataType||"";var o=/(json|script|text)/.test(n.toLowerCase());if(o||g.textarea){var r=d.getElementsByTagName("textarea")[0];if(r){m.responseText=r.value;m.status=Number(r.getAttribute("status"))||m.status;m.statusText=r.getAttribute("statusText")||m.statusText}else if(o){var t=d.getElementsByTagName("pre")[0];var y=d.getElementsByTagName("body")[0];if(t){m.responseText=t.textContent?t.textContent:t.innerHTML}else if(y){m.responseText=y.innerHTML}}}else if(g.dataType=="xml"&&!m.responseXML&&m.responseText!=null){m.responseXML=x(m.responseText)}try{s=z(m,g.dataType,g)}catch(c){e="parsererror";m.error=f=c||e}}catch(c){b("error caught",c);e="error";m.error=f=c||e}if(m.aborted){b("upload aborted");e=null}if(m.status){e=m.status>=200&&m.status<300||m.status===304?"success":"error"}if(e==="success"){g.success&&g.success.call(g.context,s,"success",m);h&&a.event.trigger("ajaxSuccess",[m,g])}else if(e){if(f==undefined)f=m.statusText;g.error&&g.error.call(g.context,m,e,f);h&&a.event.trigger("ajaxError",[m,g,f])}h&&a.event.trigger("ajaxComplete",[m,g]);if(h&&!--a.active){a.event.trigger("ajaxStop")}g.complete&&g.complete.call(g.context,m,e);v=true;if(g.timeout)clearTimeout(q);setTimeout(function(){if(!g.iframeTarget)j.remove();m.responseXML=null},100)}function r(){var b=l.attr("target"),c=l.attr("action");e.setAttribute("target",i);if(e.getAttribute("method")!="POST"){e.setAttribute("method","POST")}if(e.getAttribute("action")!=g.url){e.setAttribute("action",g.url)}if(!g.skipEncodingOverride){l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(g.timeout){q=setTimeout(function(){p=true;w(true)},g.timeout)}var d=[];try{if(g.extraData){for(var f in g.extraData){d.push(a('<input type="hidden" name="'+f+'" value="'+g.extraData[f]+'" />').appendTo(e)[0])}}if(!g.iframeTarget){j.appendTo("body");k.attachEvent?k.attachEvent("onload",w):k.addEventListener("load",w,false)}e.submit()}finally{e.setAttribute("action",c);if(b){e.setAttribute("target",b)}else{l.removeAttr("target")}a(d).remove()}}var e=l[0],f,g,h,i,j,k,m,n,o,p,q;if(d){for(f=0;f<d.length;f++){a(e[d[f].name]).attr("disabled",false)}}if(a(":input[name=submit],:input[id=submit]",e).length){alert('Error: Form elements must not have name or id of "submit".');return}g=a.extend(true,{},a.ajaxSettings,c);g.context=g.context||g;i="jqFormIO"+(new Date).getTime();if(g.iframeTarget){j=a(g.iframeTarget);o=j.attr("name");if(o==null)j.attr("name",i);else i=o}else{j=a('<iframe name="'+i+'" src="'+g.iframeSrc+'" />');j.css({position:"absolute",top:"-1000px",left:"-1000px"})}k=j[0];m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(c){var d=c==="timeout"?"timeout":"aborted";b("aborting upload... "+d);this.aborted=1;j.attr("src",g.iframeSrc);m.error=d;g.error&&g.error.call(g.context,m,d,d);h&&a.event.trigger("ajaxError",[m,g,d]);g.complete&&g.complete.call(g.context,m,d)}};h=g.global;if(h&&!(a.active++)){a.event.trigger("ajaxStart")}if(h){a.event.trigger("ajaxSend",[m,g])}if(g.beforeSend&&g.beforeSend.call(g.context,m,g)===false){if(g.global){a.active--}return}if(m.aborted){return}n=e.clk;if(n){o=n.name;if(o&&!n.disabled){g.extraData=g.extraData||{};g.extraData[o]=n.value;if(n.type=="image"){g.extraData[o+".x"]=e.clk_x;g.extraData[o+".y"]=e.clk_y}}}if(g.forceSync){r()}else{setTimeout(r,10)}var s,t,u=50,v;var x=a.parseXML||function(a,b){if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}else{b=(new DOMParser).parseFromString(a,"text/xml")}return b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null};var y=a.parseJSON||function(a){return window["eval"]("("+a+")")};var z=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f=c==="xml"||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;if(f&&g.documentElement.nodeName==="parsererror"){a.error&&a.error("parsererror")}if(d&&d.dataFilter){g=d.dataFilter(g,c)}if(typeof g==="string"){if(c==="json"||!c&&e.indexOf("json")>=0){g=y(g)}else if(c==="script"||!c&&e.indexOf("javascript")>=0){a.globalEval(g)}}return g}}if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof c=="function"){c={success:c}}var d=this.attr("action");var e=typeof d==="string"?a.trim(d):"";e=e||window.location.href||"";if(e){e=(e.match(/^([^#]+)/)||[])[1]}c=a.extend(true,{url:e,success:a.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c);var f={};this.trigger("form-pre-serialize",[this,c,f]);if(f.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(c.beforeSerialize&&c.beforeSerialize(this,c)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g,h,i=this.formToArray(c.semantic);if(c.data){c.extraData=c.data;for(g in c.data){if(c.data[g]instanceof Array){for(var j in c.data[g]){i.push({name:g,value:c.data[g][j]})}}else{h=c.data[g];h=a.isFunction(h)?h():h;i.push({name:g,value:h})}}}if(c.beforeSubmit&&c.beforeSubmit(i,this,c)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[i,this,c,f]);if(f.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var k=a.param(i);if(c.type.toUpperCase()=="GET"){c.url+=(c.url.indexOf("?")>=0?"&":"?")+k;c.data=null}else{c.data=k}var l=this,m=[];if(c.resetForm){m.push(function(){l.resetForm()})}if(c.clearForm){m.push(function(){l.clearForm()})}if(!c.dataType&&c.target){var n=c.success||function(){};m.push(function(b){var d=c.replaceTarget?"replaceWith":"html";a(c.target)[d](b).each(n,arguments)})}else if(c.success){m.push(c.success)}c.success=function(a,b,d){var e=c.context||c;for(var f=0,g=m.length;f<g;f++){m[f].apply(e,[a,b,d||l,l])}};var o=a("input:file",this).length>0;var p="multipart/form-data";var q=l.attr("enctype")==p||l.attr("encoding")==p;if(c.iframe!==false&&(o||c.iframe||q)){if(c.closeKeepAlive){a.get(c.closeKeepAlive,function(){r(i)})}else{r(i)}}else{a.ajax(c)}this.trigger("form-submit-notify",[this,c]);return this};a.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!a.isReady&&d.s){b("DOM not ready, queuing ajaxForm");a(function(){a(d.s,d.c).ajaxForm(c)});return this}b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){if(!b.isDefaultPrevented()){b.preventDefault();a(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(b){var c=b.target;var d=a(c);if(!d.is(":submit,input:image")){var e=d.closest(":submit");if(e.length==0){return}c=e[0]}var f=this;f.clk=c;if(c.type=="image"){if(b.offsetX!=undefined){f.clk_x=b.offsetX;f.clk_y=b.offsetY}else if(typeof a.fn.offset=="function"){var g=d.offset();f.clk_x=b.pageX-g.left;f.clk_y=b.pageY-g.top}else{f.clk_x=b.pageX-c.offsetLeft;f.clk_y=b.pageY-c.offsetTop}}setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var c=[];if(this.length===0){return c}var d=this[0];var e=b?d.getElementsByTagName("*"):d.elements;if(!e){return c}var f,g,h,i,j,k,l;for(f=0,k=e.length;f<k;f++){j=e[f];h=j.name;if(!h){continue}if(b&&d.clk&&j.type=="image"){if(!j.disabled&&d.clk==j){c.push({name:h,value:a(j).val()});c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y})}continue}i=a.fieldValue(j,true);if(i&&i.constructor==Array){for(g=0,l=i.length;g<l;g++){c.push({name:h,value:i[g]})}}else if(i!==null&&typeof i!="undefined"){c.push({name:h,value:i})}}if(!b&&d.clk){var m=a(d.clk),n=m[0];h=n.name;if(h&&!n.disabled&&n.type=="image"){c.push({name:h,value:m.val()});c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y})}}return c};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var d=this.name;if(!d){return}var e=a.fieldValue(this,b);if(e&&e.constructor==Array){for(var f=0,g=e.length;f<g;f++){c.push({name:d,value:e[f]})}}else if(e!==null&&typeof e!="undefined"){c.push({name:this.name,value:e})}});return a.param(c)};a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;d<e;d++){var f=this[d];var g=a.fieldValue(f,b);if(g===null||typeof g=="undefined"||g.constructor==Array&&!g.length){continue}g.constructor==Array?a.merge(c,g):c.push(g)}return c};a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(c===undefined){c=true}if(c&&(!d||b.disabled||e=="reset"||e=="button"||(e=="checkbox"||e=="radio")&&!b.checked||(e=="submit"||e=="image")&&b.form&&b.form.clk!=b||f=="select"&&b.selectedIndex==-1)){return null}if(f=="select"){var g=b.selectedIndex;if(g<0){return null}var h=[],i=b.options;var j=e=="select-one";var k=j?g+1:i.length;for(var l=j?g:0;l<k;l++){var m=i[l];if(m.selected){var n=m.value;if(!n){n=m.attributes&&m.attributes["value"]&&!m.attributes["value"].specified?m.text:m.value}if(j){return n}h.push(n)}}return h}return a(b).val()};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();if(a=="text"||a=="password"||b=="textarea"){this.value=""}else if(a=="checkbox"||a=="radio"){this.checked=false}else if(b=="select"){this.selectedIndex=-1}})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType){this.reset()}})};a.fn.enable=function(a){if(a===undefined){a=true}return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){if(b===undefined){b=true}return this.each(function(){var c=this.type;if(c=="checkbox"||c=="radio"){this.checked=b}else if(this.tagName.toLowerCase()=="option"){var d=a(this).parent("select");if(b&&d[0]&&d[0].type=="select-one"){d.find("option").selected(false)}this.selected=b}})};})(jQuery);(function(a){a.extend(a.fn,{validate:function(b){if(this.length){var d=a.data(this[0],"validator");if(d)return d;this.attr("novalidate","novalidate");d=new a.validator(b,this[0]);a.data(this[0],"validator",d);if(d.settings.onsubmit){b=this.find("input, button");b.filter(".cancel").click(function(){d.cancelSubmit=true});d.settings.submitHandler&&b.filter(":submit").click(function(){d.submitButton=this});this.submit(function(b){function e(){if(d.settings.submitHandler){if(d.submitButton)var b=a("<input type='hidden'/>").attr("name",d.submitButton.name).val(d.submitButton.value).appendTo(d.currentForm);d.settings.submitHandler.call(d,d.currentForm);d.submitButton&&b.remove();return false}return true}d.settings.debug&&b.preventDefault();if(d.cancelSubmit){d.cancelSubmit=false;return e()}if(d.form()){if(d.pendingRequest){d.formSubmitted=true;return false}return e()}else{d.focusInvalid();return false}})}return d}else b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(a(this[0]).is("form"))return this.validate().form();else{var b=true,d=a(this[0].form).validate();this.each(function(){b&=d.element(this)});return b}},removeAttrs:function(b){var d={},e=this;a.each(b.split(/\s/),function(a,b){d[b]=e.attr(b);e.removeAttr(b)});return d},rules:function(b,d){var e=this[0];if(b){var f=a.data(e.form,"validator").settings,g=f.rules,h=a.validator.staticRules(e);switch(b){case"add":a.extend(h,a.validator.normalizeRule(d));g[e.name]=h;if(d.messages)f.messages[e.name]=a.extend(f.messages[e.name],d.messages);break;case"remove":if(!d){delete g[e.name];return h}var i={};a.each(d.split(/\s/),function(a,b){i[b]=h[b];delete h[b]});return i}}e=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(e),a.validator.classRules(e),a.validator.attributeRules(e),a.validator.staticRules(e)),e);if(e.required){f=e.required;delete e.required;e=a.extend({required:f},e)}return e}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}});a.validator=function(b,d){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=d;this.init()};a.validator.format=function(b,d){if(arguments.length==1)return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)};if(arguments.length>2&&d.constructor!=Array)d=a.makeArray(arguments).slice(1);if(d.constructor!=Array)d=[d];a.each(d,function(a,c){b=b.replace(RegExp("\\{"+a+"\\}","g"),c)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(a)).hide()}},onfocusout:function(a){if(!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))this.element(a)},onkeyup:function(a){if(a.name in this.submitted||a==this.lastElement)this.element(a)},onclick:function(a){if(a.name in this.submitted)this.element(a);else a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,d,e){b.type==="radio"?this.findByName(b.name).addClass(d).removeClass(e):a(b).addClass(d).removeClass(e)},unhighlight:function(b,d,e){b.type==="radio"?this.findByName(b.name).removeClass(d).addClass(e):a(b).removeClass(d).addClass(e)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){function b(b){var d=a.data(this[0].form,"validator"),e="on"+b.type.replace(/^validate/,"");d.settings[e]&&d.settings[e].call(d,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var d=this.groups={};a.each(this.settings.groups,function(b,e){a.each(e.split(/\s/),function(a,c){d[c]=b})});var e=this.settings.rules;a.each(e,function(b,d){e[b]=a.validator.normalizeRule(d)});a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){this.lastElement=b=this.validationTargetFor(this.clean(b));this.prepareElement(b);this.currentElements=a(b);var d=this.check(b);if(d)delete this.invalid[b.name];else this.invalid[b.name]=true;if(!this.numberOfInvalids())this.toHide=this.toHide.add(this.containers);this.showErrors();return d},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var d in b)this.errorList.push({message:b[d],element:this.findByName(d)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,c;for(c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var b=this,d={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in d||!b.objectLength(a(this).rules()))return false;return d[this.name]=true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var d=a(b).rules(),e=false,f;for(f in d){var g={method:f,parameters:d[f]};try{var h=a.validator.methods[f].call(this,b.value.replace(/\r/g,""),b,g.parameters);if(h=="dependency-mismatch")e=true;else{e=false;if(h=="pending"){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!h){this.formatAndAdd(b,g);return false}}}catch(i){this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+g.method+"' method",i);throw i}}if(!e){this.objectLength(d)&&this.successList.push(b);return true}},customMetaMessage:function(b,d){if(a.metadata){var e=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return e&&e.messages&&e.messages[d]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a]},defaultMessage:function(b,d){return this.findDefined(this.customMessage(b.name,d),this.customMetaMessage(b,d),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[d],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;if(typeof c=="function")c=c.call(this,b.parameters,a);else if(d.test(c))c=jQuery.format(c.replace(d,"{$1}"),b.parameters);this.errorList.push({message:c,element:a});this.errorMap[a.name]=c;this.submitted[a.name]=c},addWrapper:function(a){if(this.settings.wrapper)a=a.add(a.parent(this.settings.wrapper));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length)this.toShow=this.toShow.add(this.containers);if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,d){var e=this.errorsFor(b);if(e.length){e.removeClass(this.settings.validClass).addClass(this.settings.errorClass);e.attr("generated")&&e.html(d)}else{e=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper)e=e.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();this.labelContainer.append(e).length||(this.settings.errorPlacement?this.settings.errorPlacement(e,a(b)):e.insertAfter(b))}if(!d&&this.settings.success){e.text("");typeof this.settings.success=="string"?e.addClass(this.settings.success):this.settings.success(e)}this.toShow=this.toShow.add(e)},errorsFor:function(b){var d=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==d})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a))a=this.findByName(a.name).not(this.settings.ignore)[0];return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var d=this.currentForm;return a(document.getElementsByName(b)).map(function(a,c){return c.form==d&&c.name==b&&c||null})},getLength:function(b,d){switch(d.nodeName.toLowerCase()){case"select":return a("option:selected",d).length;case"input":if(this.checkable(d))return this.findByName(d.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):true},dependTypes:{"boolean":function(a){return a},string:function(b,d){return!!a(b,d.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(b,d){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[b.name];if(d&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else if(!d&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,d){b.constructor==String?this.classRuleSettings[b]=d:a.extend(this.classRuleSettings,b)},classRules:function(b){var d={};(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(d,a.validator.classRuleSettings[this])});return d},attributeRules:function(b){var d={};b=a(b);for(var e in a.validator.methods){var f;if(f=e==="required"&&typeof a.fn.prop==="function"?b.prop(e):b.attr(e))d[e]=f;else if(b[0].getAttribute("type")===e)d[e]=true}d.maxlength&&/-1|2147483647|524288/.test(d.maxlength)&&delete d.maxlength;return d},metadataRules:function(b){if(!a.metadata)return{};var d=a.data(b.form,"validator").settings.meta;return d?a(b).metadata()[d]:a(b).metadata()},staticRules:function(b){var d={},e=a.data(b.form,"validator");if(e.settings.rules)d=a.validator.normalizeRule(e.settings.rules[b.name])||{};return d},normalizeRules:function(b,d){a.each(b,function(e,f){if(f===false)delete b[e];else if(f.param||f.depends){var g=true;switch(typeof f.depends){case"string":g=!!a(f.depends,d.form).length;break;case"function":g=f.depends.call(d,d)}if(g)b[e]=f.param!==undefined?f.param:true;else delete b[e]}});a.each(b,function(e,f){b[e]=a.isFunction(f)?f(d):f});a.each(["minlength","maxlength","min","max"],function(){if(b[this])b[this]=Number(b[this])});a.each(["rangelength","range"],function(){if(b[this])b[this]=[Number(b[this][0]),Number(b[this][1])]});if(a.validator.autoCreateRanges){if(b.min&&b.max){b.range=[b.min,b.max];delete b.min;delete b.max}if(b.minlength&&b.maxlength){b.rangelength=[b.minlength,b.maxlength];delete b.minlength;delete b.maxlength}}b.messages&&delete b.messages;return b},normalizeRule:function(b){if(typeof b=="string"){var d={};a.each(b.split(/\s/),function(){d[this]=true});b=d}return b},addMethod:function(b,d,e){a.validator.methods[b]=d;a.validator.messages[b]=e!=undefined?e:a.validator.messages[b];d.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,d,e){if(!this.depend(e,d))return"dependency-mismatch";switch(d.nodeName.toLowerCase()){case"select":return(b=a(d).val())&&b.length>0;case"input":if(this.checkable(d))return this.getLength(b,d)>0;default:return a.trim(b).length>0}},remote:function(b,d,e){if(this.optional(d))return"dependency-mismatch";var f=this.previousValue(d);this.settings.messages[d.name]||(this.settings.messages[d.name]={});f.originalMessage=this.settings.messages[d.name].remote;this.settings.messages[d.name].remote=f.message;e=typeof e=="string"&&{url:e}||e;if(this.pending[d.name])return"pending";if(f.old===b)return f.valid;f.old=b;var g=this;this.startRequest(d);var h={};h[d.name]=b;a.ajax(a.extend(true,{url:e,mode:"abort",port:"validate"+d.name,dataType:"json",data:h,success:function(e){g.settings.messages[d.name].remote=f.originalMessage;var h=e===true;if(h){var i=g.formSubmitted;g.prepareElement(d);g.formSubmitted=i;g.successList.push(d);g.showErrors()}else{i={};e=e||g.defaultMessage(d,"remote");i[d.name]=f.message=a.isFunction(e)?e(b):e;g.showErrors(i)}f.valid=h;g.stopRequest(d,h)}},e));return"pending"},minlength:function(b,d,e){return this.optional(d)||this.getLength(a.trim(b),d)>=e},maxlength:function(b,d,e){return this.optional(d)||this.getLength(a.trim(b),d)<=e},rangelength:function(b,d,e){b=this.getLength(a.trim(b),d);return this.optional(d)||b>=e[0]&&b<=e[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return false;var c=0,d=0,e=false;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--){d=a.charAt(f);d=parseInt(d,10);if(e)if((d*=2)>9)d-=9;c+=d;e=!e}return c%10==0},accept:function(a,b,c){c=typeof c=="string"?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(RegExp(".("+c+")$","i"))},equalTo:function(b,d,e){e=a(e).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(d).valid()});return b==e.val()}}});a.format=a.validator.format})(jQuery);(function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){c=a.port;if(a.mode=="abort"){b[c]&&b[c].abort();b[c]=d}});else{var c=a.ajax;a.ajax=function(d){var e=("port"in d?d:a.ajaxSettings).port;if(("mode"in d?d:a.ajaxSettings).mode=="abort"){b[e]&&b[e].abort();return b[e]=c.apply(this,arguments)}return c.apply(this,arguments)}}})(jQuery);(function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(b,d){function e(b){b=a.event.fix(b);b.type=d;return a.event.handle.call(this,b)}a.event.special[d]={setup:function(){this.addEventListener(b,e,true)},teardown:function(){this.removeEventListener(b,e,true)},handler:function(b){arguments[0]=a.event.fix(b);arguments[0].type=d;return a.event.handle.apply(this,arguments)}}});a.extend(a.fn,{validateDelegate:function(b,d,e){return this.bind(d,function(d){var f=a(d.target);if(f.is(b))return e.apply(f,arguments)})}})})(jQuery)
